:root{
  /* Safe areas */
  --safe-b: env(safe-area-inset-bottom, 0px);
  --safe-t: env(safe-area-inset-top, 0px);

  /* нижняя навигация */
  --nav-h-mobile: 45px;
  --nav-h-desktop: 47px;
  --tap-min: 44px;
  --nav-h: var(--nav-h-mobile);

  /* HEADER: высоты зон */
  --hdr-bar-h: 40px; /* верхняя полоса на мобилке */
  --hdr-row-h: 48px; /* строка с авой/именем/токенами */
  --header-h: calc(var(--safe-t) + var(--hdr-bar-h) + var(--hdr-row-h));
}

/* ПК/ноут (мышь/трекпад): прячем верхний бар, оставляем только строку */
@media (pointer: fine){
  :root{
    --nav-h: var(--nav-h-desktop);
    --hdr-bar-h: 0px; /* бара нет на десктопе */
    --header-h: calc(var(--hdr-bar-h) + var(--hdr-row-h));
  }
}

/* ========== Утилиты ========== */
.page-has-bottom-nav{ padding-bottom: calc(var(--nav-h) + var(--safe-b)); }

.no-scrollbar{ -ms-overflow-style:none; scrollbar-width:none; }
.no-scrollbar::-webkit-scrollbar{ display:none; }

.scroll-wrap{ -webkit-overflow-scrolling:touch; }

/* футер над системной навигацией/safe area */
.footer-above-nav{ bottom: calc(var(--nav-h) + var(--safe-b)); }

/* Отступ сверху для контента = общей высоте хедера */
.pt-header{ padding-top: var(--header-h); }

/* ========== Хедер ========== */
.app-header{
  position: fixed; inset: 0 auto auto 0; right: 0; top: 0; z-index: 40;
  width: 100%;
}

/* Блоки хедера */
.app-header__bar{
  height: calc(var(--hdr-bar-h) + var(--safe-t));
  padding-top: var(--safe-t);
  background: rgba(23,23,23,0.);   /* будет переопределено на мобилке */
  backdrop-filter: blur(10px);       /* будет убрано на мобилке */
  -webkit-backdrop-filter: blur(10px);
}
.app-header__row{
  height: var(--hdr-row-h);
  display: flex; align-items: center; gap: .5rem;
  padding: .5rem 1rem;
  background: rgba(23,23,23,0.7);    /* будет переопределено на мобилке */
  backdrop-filter: blur(10px);       /* будет убрано на мобилке */
  -webkit-backdrop-filter: blur(10px);
  box-shadow: 0 1px 4px rgba(0,0,0,.25);
}

/* ========== Мобилки/планшеты: единый фон+blur без «перелома» ========== */
@media (pointer: coarse) {
  .app-header{
    --hdr-bg: rgba(23,23,23,.62);
  }
  /* Подложка хедера на всю высоту (safe-top + бар + строка) */
  .app-header::before{
    content: "";
    position: absolute;
    left: 0; right: 0; top: 0;
    height: calc(var(--safe-t) + var(--hdr-bar-h) + var(--hdr-row-h));
    background: var(--hdr-bg);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px); /* iOS */
    z-index: -1; /* уходит под контент хедера */
  }
  /* Внутренним слоям убираем фоны и blur, чтобы не было стыка */
  .app-header__bar,
  .app-header__row{
    background: transparent;
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
  }
  /* Тень у нижней строки, если нужна визуальная граница */
  .app-header__row{
    box-shadow: 0 1px 4px rgba(0,0,0,.25);
  }
}

